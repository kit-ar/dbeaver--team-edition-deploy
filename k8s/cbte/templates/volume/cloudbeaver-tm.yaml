apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: {{ .Release.Name }}-tm-data
  creationTimestamp: null
  labels:
    app: {{ .Release.Name }}-tm-data
  annotations:
    x-debug: >-
      {{ .Values | toJson }}
spec:
  accessModes:
    - ReadWriteMany
  {{- if or (eq .Values.cloudProvider "gcp") (eq .Values.cloudProvider "aws") (eq .Values.cloudProvider "azure") }}
  storageClassName: {{ .Values.storage.storageClassName }}
  {{- else }}
    {{- if .Values.cloudbeaverTM.storageClassName }}
  # adding support for custom storage class (independent of whether we declare we are in a specific cloud or not)
  storageClassName: {{ .Values.cloudbeaverTM.storageClassName }}
    {{- else }}
      {{- if .Values.storage.storageClassName }}
  storageClassName: {{ .Values.storage.storageClassName }}
      {{- end }}
    {{- end }}
  {{- end }}
  resources:
    requests:
      storage: 1Gi
status: {}